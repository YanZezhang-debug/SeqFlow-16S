# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨è€ƒè™‘ä¸º Sanger 16S rRNA æµ‹åºåˆ†æå·¥å…·åŒ…åšå‡ºè´¡çŒ®ï¼ğŸ‰

æœ¬æ–‡æ¡£æä¾›äº†å¦‚ä½•å‚ä¸é¡¹ç›®å¼€å‘çš„æŒ‡å—ã€‚

## ğŸ“‹ ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [å¦‚ä½•è´¡çŒ®](#å¦‚ä½•è´¡çŒ®)
- [æŠ¥å‘Šé—®é¢˜](#æŠ¥å‘Šé—®é¢˜)
- [æäº¤ä»£ç ](#æäº¤ä»£ç )
- [å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æµ‹è¯•](#æµ‹è¯•)
- [æ–‡æ¡£](#æ–‡æ¡£)

## è¡Œä¸ºå‡†åˆ™

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ ä¸€ä¸ªå¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ‰¿è¯ºï¼š

- ä½¿ç”¨å‹å¥½å’ŒåŒ…å®¹çš„è¯­è¨€
- å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- ä¼˜é›…åœ°æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

### æˆ‘ä»¬çš„æ ‡å‡†

**ç§¯æè¡Œä¸ºåŒ…æ‹¬ï¼š**
- ä½¿ç”¨å‹å¥½å’ŒåŒ…å®¹çš„è¯­è¨€
- å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- ä¼˜é›…åœ°æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- ä¸“æ³¨äºå¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…

**ä¸å¯æ¥å—çš„è¡Œä¸ºåŒ…æ‹¬ï¼š**
- ä½¿ç”¨æ€§åŒ–çš„è¯­è¨€æˆ–å›¾åƒ
- ä¾®è¾±/è´¬æŸæ€§è¯„è®ºå’Œäººèº«æ”»å‡»
- å…¬å¼€æˆ–ç§ä¸‹çš„éªšæ‰°
- æœªç»è®¸å¯å‘å¸ƒä»–äººçš„ç§äººä¿¡æ¯

## å¦‚ä½•è´¡çŒ®

### æŠ¥å‘Šé—®é¢˜

å‘ç° Bugï¼Ÿæœ‰åŠŸèƒ½å»ºè®®ï¼Ÿè¯·æäº¤ Issueï¼

#### Bug æŠ¥å‘Š

æäº¤ Bug æŠ¥å‘Šæ—¶ï¼Œè¯·åŒ…å«ï¼š

1. **æ¸…æ™°çš„æ ‡é¢˜** - ç®€æ´æè¿°é—®é¢˜
2. **è¯¦ç»†æè¿°** - é—®é¢˜çš„è¯¦ç»†è¯´æ˜
3. **é‡ç°æ­¥éª¤** - å¦‚ä½•é‡ç°è¿™ä¸ªé—®é¢˜
4. **é¢„æœŸè¡Œä¸º** - æ‚¨æœŸæœ›å‘ç”Ÿä»€ä¹ˆ
5. **å®é™…è¡Œä¸º** - å®é™…å‘ç”Ÿäº†ä»€ä¹ˆ
6. **ç¯å¢ƒä¿¡æ¯**ï¼š
   - æ“ä½œç³»ç»Ÿï¼ˆWindows/Linux/macOSï¼‰
   - Python ç‰ˆæœ¬
   - ç›¸å…³ä¾èµ–åŒ…ç‰ˆæœ¬
7. **æˆªå›¾æˆ–æ—¥å¿—** - å¦‚æœé€‚ç”¨

**ç¤ºä¾‹ï¼š**

```markdown
### Bug æè¿°
åœ¨å¤„ç†åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„æ–‡ä»¶åæ—¶ç¨‹åºå´©æºƒ

### é‡ç°æ­¥éª¤
1. å‡†å¤‡æ–‡ä»¶ååŒ…å«ä¸­æ–‡æ‹¬å·çš„æµ‹åºæ–‡ä»¶
2. è¿è¡Œ `python sanger_16s_pipeline.py -i ./data`
3. ç¨‹åºåœ¨æ–‡ä»¶åè§£æé˜¶æ®µæŠ¥é”™

### é¢„æœŸè¡Œä¸º
åº”è¯¥èƒ½å¤Ÿæ­£ç¡®è§£æåŒ…å«ç‰¹æ®Šå­—ç¬¦çš„æ–‡ä»¶å

### å®é™…è¡Œä¸º
ç¨‹åºæŠ›å‡º UnicodeDecodeError å¼‚å¸¸

### ç¯å¢ƒ
- OS: Windows 10
- Python: 3.9.7
- Biopython: 1.79

### é”™è¯¯æ—¥å¿—
[ç²˜è´´é”™è¯¯ä¿¡æ¯]
```

#### åŠŸèƒ½å»ºè®®

æäº¤åŠŸèƒ½å»ºè®®æ—¶ï¼Œè¯·åŒ…å«ï¼š

1. **åŠŸèƒ½æè¿°** - æ‚¨å¸Œæœ›æ·»åŠ ä»€ä¹ˆåŠŸèƒ½
2. **ä½¿ç”¨åœºæ™¯** - è¿™ä¸ªåŠŸèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜
3. **å»ºè®®å®ç°** - æ‚¨è®¤ä¸ºå¦‚ä½•å®ç°ï¼ˆå¯é€‰ï¼‰
4. **æ›¿ä»£æ–¹æ¡ˆ** - æ˜¯å¦æœ‰å…¶ä»–è§£å†³æ–¹æ¡ˆ

### æäº¤ä»£ç 

æˆ‘ä»¬æ¬¢è¿ Pull Requestï¼ä»¥ä¸‹æ˜¯è´¡çŒ®ä»£ç çš„æ­¥éª¤ï¼š

#### 1. Fork é¡¹ç›®

ç‚¹å‡» GitHub é¡µé¢å³ä¸Šè§’çš„ "Fork" æŒ‰é’®ã€‚

#### 2. å…‹éš†åˆ°æœ¬åœ°

```bash
git clone https://github.com/YOUR_USERNAME/sanger-16s-analysis.git
cd sanger-16s-analysis
```

#### 3. åˆ›å»ºåˆ†æ”¯

```bash
# ä» main åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯
git checkout -b feature/your-feature-name

# æˆ–ä¿®å¤ bug
git checkout -b fix/bug-description
```

**åˆ†æ”¯å‘½åè§„èŒƒï¼š**
- `feature/` - æ–°åŠŸèƒ½
- `fix/` - Bug ä¿®å¤
- `docs/` - æ–‡æ¡£æ›´æ–°
- `refactor/` - ä»£ç é‡æ„
- `test/` - æµ‹è¯•ç›¸å…³

#### 4. è¿›è¡Œä¿®æ”¹

- ç¼–å†™ä»£ç 
- éµå¾ªä»£ç è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- ç¼–å†™æˆ–æ›´æ–°æµ‹è¯•
- æ›´æ–°æ–‡æ¡£

#### 5. æäº¤æ›´æ”¹

```bash
git add .
git commit -m "ç±»å‹: ç®€çŸ­æè¿°

è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰
"
```

**æäº¤ä¿¡æ¯è§„èŒƒï¼š**
- `feat:` - æ–°åŠŸèƒ½
- `fix:` - Bug ä¿®å¤
- `docs:` - æ–‡æ¡£æ›´æ–°
- `style:` - ä»£ç æ ¼å¼è°ƒæ•´
- `refactor:` - ä»£ç é‡æ„
- `test:` - æµ‹è¯•ç›¸å…³
- `chore:` - æ„å»º/å·¥å…·ç›¸å…³

**ç¤ºä¾‹ï¼š**
```
feat: æ·»åŠ å¯¹æ–°æ–‡ä»¶å‘½åæ ¼å¼çš„æ”¯æŒ

- æ·»åŠ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è§„åˆ™
- æ›´æ–°é…ç½®æ–‡ä»¶ç¤ºä¾‹
- æ·»åŠ å•å…ƒæµ‹è¯•
```

#### 6. æ¨é€åˆ° GitHub

```bash
git push origin feature/your-feature-name
```

#### 7. åˆ›å»º Pull Request

1. è®¿é—®æ‚¨çš„ Fork é¡µé¢
2. ç‚¹å‡» "Pull Request" æŒ‰é’®
3. å¡«å†™ PR æè¿°ï¼š
   - æ›´æ”¹çš„å†…å®¹
   - ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ›´æ”¹
   - å¦‚ä½•æµ‹è¯•
   - ç›¸å…³ Issueï¼ˆå¦‚æœæœ‰ï¼‰

## å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. å®‰è£… Python

ç¡®ä¿å®‰è£…äº† Python 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼š

```bash
python --version
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# Windows
python -m venv venv
venv\Scripts\activate

# Linux/macOS
python3 -m venv venv
source venv/bin/activate
```

### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt

# å®‰è£…å¼€å‘ä¾èµ–ï¼ˆå¦‚æœæœ‰ï¼‰
pip install pytest black flake8
```

### 4. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/test_filename_parser.py
```

## ä»£ç è§„èŒƒ

### Python ä»£ç é£æ ¼

éµå¾ª [PEP 8](https://www.python.org/dev/peps/pep-0008/) é£æ ¼æŒ‡å—ã€‚

**å…³é”®è¦ç‚¹ï¼š**

- ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ç¼©è¿›ï¼ˆä¸ä½¿ç”¨ Tabï¼‰
- æ¯è¡Œæœ€å¤š 79 ä¸ªå­—ç¬¦ï¼ˆæ–‡æ¡£å­—ç¬¦ä¸²/æ³¨é‡Šæœ€å¤š 72ï¼‰
- ä½¿ç”¨ç©ºè¡Œåˆ†éš”å‡½æ•°å’Œç±»
- å¯¼å…¥è¯­å¥æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å

**å‘½åè§„èŒƒï¼š**

```python
# ç±»åï¼šå¤§é©¼å³°
class FileNameParser:
    pass

# å‡½æ•°/å˜é‡åï¼šå°å†™+ä¸‹åˆ’çº¿
def parse_filename(file_path):
    sample_id = extract_sample_id(file_path)
    return sample_id

# å¸¸é‡ï¼šå…¨å¤§å†™+ä¸‹åˆ’çº¿
MAX_QUALITY_SCORE = 40
DEFAULT_DATABASE = "nt"

# ç§æœ‰æˆå‘˜ï¼šå•ä¸‹åˆ’çº¿å‰ç¼€
def _internal_helper():
    pass
```

### æ–‡æ¡£å­—ç¬¦ä¸²

ä½¿ç”¨ Google é£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼š

```python
def assemble_sequences(forward_seq, reverse_seq, min_overlap=20):
    """
    ç»„è£…æ­£åå‘æµ‹åºåºåˆ—ã€‚
    
    Args:
        forward_seq (str): æ­£å‘åºåˆ—
        reverse_seq (str): åå‘åºåˆ—
        min_overlap (int, optional): æœ€å°é‡å é•¿åº¦ã€‚é»˜è®¤ä¸º 20ã€‚
    
    Returns:
        str: ç»„è£…åçš„åºåˆ—
    
    Raises:
        ValueError: å¦‚æœåºåˆ—æ ¼å¼ä¸æ­£ç¡®
        
    Example:
        >>> forward = "ATCGATCG"
        >>> reverse = "CGATCGAT"
        >>> result = assemble_sequences(forward, reverse)
    """
    pass
```

### æ³¨é‡Š

- ä½¿ç”¨ä¸­æ–‡æˆ–è‹±æ–‡æ³¨é‡Šï¼ˆä¿æŒä¸€è‡´ï¼‰
- æ³¨é‡Šåº”è¯¥è§£é‡Š"ä¸ºä»€ä¹ˆ"è€Œä¸æ˜¯"æ˜¯ä»€ä¹ˆ"
- å¤æ‚é€»è¾‘å¿…é¡»æ·»åŠ æ³¨é‡Š

```python
# å¥½çš„æ³¨é‡Š
# ä½¿ç”¨å›¾è®ºç®—æ³•å¯»æ‰¾æœ€ä¼˜é‡å ï¼Œé¿å…è´ªå¿ƒç®—æ³•çš„å±€éƒ¨æœ€ä¼˜é—®é¢˜
overlap = find_optimal_overlap(seq1, seq2)

# ä¸å¥½çš„æ³¨é‡Š
# è°ƒç”¨ find_optimal_overlap å‡½æ•°
overlap = find_optimal_overlap(seq1, seq2)
```

## æµ‹è¯•

### ç¼–å†™æµ‹è¯•

ä¸ºæ–°åŠŸèƒ½ç¼–å†™å•å…ƒæµ‹è¯•ï¼š

```python
import pytest
from filename_parser import FileNameParser

def test_parse_standard_format():
    """æµ‹è¯•æ ‡å‡†æ ¼å¼æ–‡ä»¶åè§£æ"""
    parser = FileNameParser()
    result = parser.parse("0001_12345_(sample1)_[16SF].ab1")
    
    assert result['sample_id'] == 'sample1'
    assert result['direction'] == 'F'
    assert result['order_number'] == '12345'

def test_parse_invalid_format():
    """æµ‹è¯•æ— æ•ˆæ ¼å¼åº”è¯¥æŠ›å‡ºå¼‚å¸¸"""
    parser = FileNameParser()
    
    with pytest.raises(ValueError):
        parser.parse("invalid_filename.ab1")
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ–‡ä»¶çš„æµ‹è¯•
pytest tests/test_filename_parser.py

# æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
pytest -v

# æ˜¾ç¤ºæµ‹è¯•è¦†ç›–ç‡
pytest --cov=.
```

## æ–‡æ¡£

### æ›´æ–°æ–‡æ¡£

å¦‚æœæ‚¨çš„æ›´æ”¹å½±å“äº†ç”¨æˆ·ä½¿ç”¨æ–¹å¼ï¼Œè¯·æ›´æ–°ç›¸åº”æ–‡æ¡£ï¼š

- `README.md` - ä¸»è¦æ–‡æ¡£
- `CHANGELOG.md` - æ›´æ–°æ—¥å¿—
- ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- é…ç½®æ–‡ä»¶ç¤ºä¾‹

### æ–‡æ¡£é£æ ¼

- ä½¿ç”¨æ¸…æ™°ã€ç®€æ´çš„è¯­è¨€
- æä¾›ä»£ç ç¤ºä¾‹
- åŒ…å«æˆªå›¾ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
- ä¿æŒæ ¼å¼ä¸€è‡´

## ä»£ç å®¡æŸ¥

æäº¤ PR åï¼Œç»´æŠ¤è€…ä¼šè¿›è¡Œä»£ç å®¡æŸ¥ã€‚å®¡æŸ¥è¿‡ç¨‹ä¸­å¯èƒ½ä¼šï¼š

- æå‡ºä¿®æ”¹å»ºè®®
- è¦æ±‚è¡¥å……æµ‹è¯•
- è¦æ±‚æ›´æ–°æ–‡æ¡£
- è®¨è®ºå®ç°æ–¹æ¡ˆ

è¯·è€å¿ƒç­‰å¾…å®¡æŸ¥ï¼Œå¹¶ç§¯æå“åº”åé¦ˆã€‚

## å‘å¸ƒæµç¨‹

ç»´æŠ¤è€…ä¼šå®šæœŸå‘å¸ƒæ–°ç‰ˆæœ¬ï¼š

1. æ›´æ–° `CHANGELOG.md`
2. æ›´æ–°ç‰ˆæœ¬å·
3. åˆ›å»º Git æ ‡ç­¾
4. å‘å¸ƒåˆ° GitHub Releases

## è·å–å¸®åŠ©

å¦‚æœ‰ç–‘é—®ï¼Œå¯ä»¥ï¼š

- ğŸ“§ æäº¤ [Issue](https://github.com/YOUR_USERNAME/sanger-16s-analysis/issues)
- ğŸ’¬ å‚ä¸ [Discussions](https://github.com/YOUR_USERNAME/sanger-16s-analysis/discussions)
- ğŸ“– æŸ¥çœ‹ç°æœ‰çš„ Issue å’Œ PR

## æ„Ÿè°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼æ‚¨çš„è´¡çŒ®è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚ğŸ™

---

å†æ¬¡æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼â¤ï¸

